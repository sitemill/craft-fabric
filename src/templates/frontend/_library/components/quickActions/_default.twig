{#
    The actions that show on asset cards and the top bar of asset pages
    You can ovveride quickActionsMain to modify the main actions.
    You can ovveride quickActionsMore to modify the actions in the dropdown.
#}
{% set context = context|default('default') %}
{% set index =  loop is defined ? loop.index : '' %}
{% set buttonSize = context == 'card' ? 'small' : 'default' %}

<div class="quick-actions">
    <h4>Quick actions</h4>
    {% block quickActionsMain %}
        {% if (not craft.library.damActive and asset.url) %}
            {% include '_library/components/action.twig' with {
                action: craft.library.damActive ? craft.dam.download(asset) : asset.url,
                text: 'Download'|t,
                size: buttonSize,
                classes: ['bg-primary','text-canvas'],
                icon: 'fas fa-download',
                attributes: {
                    'title' : 'Download this asset'|t,
                    'download' : asset.title
                }
            } %}
        {% endif %}
    {% endblock %}

    <div class="more-actions" x-data="{ dropdown{{ index }}open: false }">
        <div class="action action--{{ buttonSize }} action--icon-only bg-canvas" @click="dropdown{{ index }}open = true">
            <i class="fas fa-ellipsis-h" aria-hidden="true"></i> <span>{{ 'Actions'|t }}</span>
        </div>
        <div class="more-actions__dropdown" x-show="dropdown{{ index }}open" @click.away="dropdown{{ index }}open = false">
            <ul class="more-actions__list">
            {% block quickActionsMore %}
                {% include '_library/components/action.twig' with {
                    text: 'Share'|t,
                    action: '/dialog/share/' ~ asset.id,
                    size: buttonSize,
                    classes: ['action--list-item'],
                    icon: 'fas fa-link',
                    target: 'dialog',
                    attributes: {
                        'title' : 'Get a public link for this asset'|t,
                    }
                } %}
                {% if userPermissions.isAdmin %}
                    {% include '_library/components/action.twig' with {
                        text: 'Edit'|t,
                        action: asset.cpEditUrl,
                        size: buttonSize,
                        classes: ['action--list-item'],
                        icon: 'fas fa-pen',
                        target: 'blank',
                        attributes: {
                            'title' : 'Edit asset in control panel'|t,
                        }
                    } %}
                {% endif %}
            {% endblock %}
            </ul>
        </div>
    </div>
</div>