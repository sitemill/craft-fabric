{# Check for user access #}
{% set publicLayout = false %}
{% if not craft.library.settings.public and not currentUser %}
    {% if publicPage is defined and publicPage == true %}
        {% set publicLayout = true %}
    {% else %}
        {% requireLogin %}
    {% endif %}
{% endif %}

{# Let's set global user permissions once to help with performance #}
{% set userPermissions = {
    'isAdmin' : currentUser.admin
} %}

{# TODO: replace this when we have collections entry type #}
{# Collections enabled? #}
{% set collectionsEnabled = craft.library.settings.enableCollections %}

{# Get colors #}
{% include '_settings/colors.twig' %}

{# Get any URL Parameters #}
{% set keywords = craft.app.request.getParam('q')|default(null) %}
{% set category = category is defined ? category : null %}
{% set kind = craft.app.request.getParam('kind')|default('*') %}
{% set order = craft.app.request.getParam('order')|default('title asc') %}
{% set layout = craft.app.request.getParam('layout')|default('grid') %}

{% block app %}

{% endblock %}